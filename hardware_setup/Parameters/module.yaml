__max_num_config_instances: &max_num_config_instances 2

module_name: battery_status

parameters:
    - group: Battery Calibration
      definitions:
        BAT${i}_V_DIV:
            description:
                short: Battery ${i} voltage divider (V divider)
                long: |
                    This is the divider from battery ${i} voltage to ADC voltage.
                    If using e.g. Mauch power modules the value from the datasheet
                    can be applied straight here. A value of -1 means to use
                    the board default.

            type: float
            decimal: 8
            reboot_required: true
            num_instances: *max_num_config_instances
            instance_start: 1
            default: [-1.0, -1.0]

        BAT${i}_A_PER_V:
            description:
                short: Battery ${i} current per volt (A/V)
                long: |
                    The voltage seen by the ADC multiplied by this factor
                    will determine the battery current. A value of -1 means to use
                    the board default.

            type: float
            decimal: 8
            reboot_required: true
            num_instances: *max_num_config_instances
            instance_start: 1
            default: [-1.0, -1.0]

        BAT${i}_V_CHANNEL:
            description:
                short: Battery ${i} Voltage ADC Channel
                long: |
                    This parameter specifies the ADC channel used to monitor voltage of main power battery.
                    A value of -1 means to use the board default.

            type: int32
            reboot_required: true
            num_instances: *max_num_config_instances
            instance_start: 1
            default: [-1, -1]

        BAT${i}_I_CHANNEL:
            description:
                short: Battery ${i} Current ADC Channel
                long: |
                    This parameter specifies the ADC channel used to monitor current of main power battery.
                    A value of -1 means to use the board default.

            type: int32
            reboot_required: true
            num_instances: *max_num_config_instances
            instance_start: 1
            default: [-1, -1]
    - group: PTI
      definitions:
        PTI_DOUB_AMP:
            description:
                short: PTI Doublet Amplitude
                long: |
                    Amplitude of doublet at full knob (0 - 1)
            type: float
            decimal: 3
            default: 0.3
            min: 0
            max: 1
        PTI_DOUB_T:
            description:
                short: PTI Doublet Period
                long: |
                    Period of entire doublet performed
            type: float
            decimal: 3
            default: 4
            min: 0
            max: 100
        PTI_MS_AMP:
            description:
                short: PTI MS Amplitude
                long: |
                    Amplitude of control surface multisine at full knob (0 - 1)
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 1
        PTI_MS_T:
            description:
                short: PTI MS Period
                long: |
                    Period of multisine
            type: float
            decimal: 3
            default: 20
            min: 0
            max: 1000
        PTI_SWP_AMP:
            description:
                short: PTI SWP Amplitude
                long: |
                    Amplitude of frequency sweep at full knob (0 - 1)
            type: float
            decimal: 3
            default: 0.3
            min: 0
            max: 1
        PTI_SWP_F_START:
            description:
                short: PTI SWP Start Frequency
                long: |
                    Starting frequency for frequency sweep
            type: float
            decimal: 3
            default: 0.2
            min: 0
            max: 100
        PTI_SWP_F_STOP:
            description:
                short: PTI SWP Stop Freuqency
                long: |
                    Stopping frequency for frequency sweep
            type: float
            decimal: 3
            default: 2
            min: 0
            max: 100
        PTI_SWP_T:
            description:
                short: PTI SWP Period
                long: |
                    Period of frequency sweep
            type: float
            decimal: 3
            default: 20
            min: 0
            max: 1000
        PTI_DOUB_SEL:
            description:
                short: PTI Doublet Selection
                long: |
                    Selection for doublets
            type: float
            default: 1
            min: 1
            max: 3
        PTI_MS_SEL:
            description:
                short: PTI MS Selection
                long: |
                    Selection for multisines
            type: float
            default: 1
            min: 1
            max: 3
        PTI_SWP_SEL:
            description:
                short: PTI SWP Selection
                long: |
                    Selection for frequency sweeps
            type: float
            default: 1
            min: 1
            max: 3
        PTI_MODE_CHG:
            description:
                short: PTI Term Mode Change
                long: |
                    PTI will stop when not in external mode
            type: float
            default: 0
            min: 0
            max: 1
        PTI_MOTOR_AMP:
            description:
                short: PTI MS Motor Amplitude
                long: |
                    PTI MS Motor Amplitude
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 1
        PTI_MOT_MS_LOW:
            description:
                short: Low Motor Amplitude MS
                long: |
                    Low Motor Amplitude MS
            type: float
            decimal: 3
            default: 0.1
            min: 0
            max: 1
        PTI_MOT_MS_HIGH:
            description:
                short: High Motor Amplitude MS
                long: |
                    High Motor Amplitude MS
            type: float
            decimal: 3
            default: 0.3
            min: 0
            max: 1
        PTI_MS_GAIN_1:
            description:
                short: PTI Gain Axis 1
                long: |
                    Gain on multisine axis 1
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 30
        PTI_MS_GAIN_2:
            description:
                short: PTI Gain Axis 2
                long: |
                    Gain on multisine axis 2
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 30
        PTI_MS_GAIN_3:
            description:
                short: PTI Gain Axis 3
                long: |
                    Gain on multisine axis 3
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 30
        PTI_MS_GAIN_4:
            description:
                short: PTI Gain Axis 4
                long: |
                    Gain on multisine axis 4
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 30
        PTI_MS_GAIN_5:
            description:
                short: PTI Gain Axis 5
                long: |
                    Gain on multisine axis 5
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 30
        PTI_MS_GAIN_6:
            description:
                short: PTI Gain Axis 6
                long: |
                    Gain on multisine axis 6
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 30
        PTI_MS_GAIN_7:
            description:
                short: PTI Gain Axis 7
                long: |
                    Gain on multisine axis 7
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 30

    - group: Fault
      definitions:
        FAULT_SURFACE:
            description:
                short: Fault Control Surface
                long: |
                    1: Left Aileron, 2: Right Aileron, 3: Rudder, 4: Elevator, 5: Left Flap, 6: Right Flap
            type: float
            default: 3
            min: 1
            max: 6
        FAULT_COMMAND:
            description:
                short: Fault Command
                long: |
                    Any value in the range is manually sent to the failed control effector as a stuck command.
            type: float
            decimal: 3
            default: 0
            min: -1
            max: 1
        FAULT_INTENSITY:
            description:
                short: Fault Severity
                long: |
                    [0 - 1] Fully faulted to fully functional
            type: float
            decimal: 3
            default: 0
            min: 0
            max: 1

    - group: ControlAllocation
      definitions:
        CA_EXP_ENGAGE:
            description:
                short: Engage Experimental CA
                long: |
                    0 - PX4, 1 - Pinv, 2 - Rpinv, 3 - DA
            type: float
            default: 0
            min: 0
            max: 3
        CA_DA_ZEROTOL:
            description:
                short: Zero Tolerance for DA
                long: |
                    Acts as zero tolerance cutoff for direct allocation. Appended to 1e CA_DA_ZEROTOL so setting in -5 would mean the zero_tol is 1e-5.
            type: float
            default: -7
            min: -15
            max: -1

    - group: ManualActuator
      definitions:
        MANUAL_ACT_CHK:
            description:
                short: Enable Manual Actuator
                long: |
                    Enables the manual actuator testing mode
            type: float
            default: 0
            min: 0
            max: 1
        MANUAL_ACT_IDX:
            description:
                short: Manual Actuator Index
                long: |
                    Specifies the index of the actuator being tested
            type: float
            default: 0
            min: 0
            max: 16
        MANUAL_ACT_VAL:
            description:
                short: Manual Actuator Command
                long: |
                    Value being sent to the actuator
            type: float
            decimal: 3
            default: 0
            min: 0
            max: 1

    - group: ActuatorLimits
      definitions:
        CA_S1_MIN:
            description:
                short: Minimum Position S1
                long: |
                    Minimum position for surface 1 in rad
            type: float
            decimal: 3
            default: -1
            min: -5
            max: 0
        CA_S2_MIN:
            description:
                short: Minimum Position S2
                long: |
                    Minimum position for surface 2 in rad
            type: float
            decimal: 3
            default: -1
            min: -5
            max: 0
        CA_S3_MIN:
            description:
                short: Minimum Position S3
                long: |
                    Minimum position for surface 3 in rad
            type: float
            decimal: 3
            default: -1
            min: -5
            max: 0
        CA_S4_MIN:
            description:
                short: Minimum Position S4
                long: |
                    Minimum position for surface 4 in rad
            type: float
            decimal: 3
            default: -1
            min: -5
            max: 0
        CA_S5_MIN:
            description:
                short: Minimum Position S5
                long: |
                    Minimum position for surface 5 in rad
            type: float
            decimal: 3
            default: -1
            min: -5
            max: 0
        CA_S6_MIN:
            description:
                short: Minimum Position S6
                long: |
                    Minimum position for surface 6 in rad
            type: float
            decimal: 3
            default: -1
            min: -5
            max: 0
        CA_S1_MAX:
            description:
                short: Maximum Position S1
                long: |
                    Maximum position for surface 1 in rad
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 5
        CA_S2_MAX:
            description:
                short: Maximum Position S2
                long: |
                    Maximum position for surface 2 in rad
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 5
        CA_S3_MAX:
            description:
                short: Maximum Position S3
                long: |
                    Maximum position for surface 3 in rad
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 5
        CA_S4_MAX:
            description:
                short: Maximum Position S4
                long: |
                    Maximum position for surface 4 in rad
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 5
        CA_S5_MAX:
            description:
                short: Maximum Position S5
                long: |
                    Maximum position for surface 5 in rad
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 5
        CA_S6_MAX:
            description:
                short: Maximum Position S6
                long: |
                    Maximum position for surface 6 in rad
            type: float
            decimal: 3
            default: 1
            min: 0
            max: 5
